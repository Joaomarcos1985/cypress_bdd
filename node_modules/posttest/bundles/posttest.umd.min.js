!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("posttest",["exports","@angular/core","@angular/common/http"],e):e((t=t||self).posttest={},t.ng.core,t.ng.common.http)}(this,(function(t,e,i){"use strict";var s=function(){function t(t){this.http=t}return t.prototype.post=function(t,e){var i="https://"+e+".audienceplay.com/storeAppEvents";return this.http.post(i,t)},t}();s.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new s(e.ɵɵinject(i.HttpClient))},token:s,providedIn:"root"}),s.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],s.ctorParameters=function(){return[{type:i.HttpClient}]};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n=function(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}((function(t){!function(e,i){var s={};!function(t){t.__esModule=!0,t.digestLength=32,t.blockSize=64;var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function i(t,i,s,n,r){for(var o,a,h,f,u,d,c,p,l,y,g,b,v;r>=64;){for(o=i[0],a=i[1],h=i[2],f=i[3],u=i[4],d=i[5],c=i[6],p=i[7],y=0;y<16;y++)g=n+4*y,t[y]=(255&s[g])<<24|(255&s[g+1])<<16|(255&s[g+2])<<8|255&s[g+3];for(y=16;y<64;y++)b=((l=t[y-2])>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,v=((l=t[y-15])>>>7|l<<25)^(l>>>18|l<<14)^l>>>3,t[y]=(b+t[y-7]|0)+(v+t[y-16]|0);for(y=0;y<64;y++)b=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&d^~u&c)|0)+(p+(e[y]+t[y]|0)|0)|0,v=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&a^o&h^a&h)|0,p=c,c=d,d=u,u=f+b|0,f=h,h=a,a=o,o=b+v|0;i[0]+=o,i[1]+=a,i[2]+=h,i[3]+=f,i[4]+=u,i[5]+=d,i[6]+=c,i[7]+=p,n+=64,r-=64}return n}var s=function(){function e(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return e.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},e.prototype.clean=function(){for(var t=0;t<this.buffer.length;t++)this.buffer[t]=0;for(t=0;t<this.temp.length;t++)this.temp[t]=0;this.reset()},e.prototype.update=function(t,e){if(void 0===e&&(e=t.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var s=0;if(this.bytesHashed+=e,this.bufferLength>0){for(;this.bufferLength<64&&e>0;)this.buffer[this.bufferLength++]=t[s++],e--;64===this.bufferLength&&(i(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(e>=64&&(s=i(this.temp,this.state,t,s,e),e%=64);e>0;)this.buffer[this.bufferLength++]=t[s++],e--;return this},e.prototype.finish=function(t){if(!this.finished){var e=this.bytesHashed,s=this.bufferLength,n=e/536870912|0,r=e<<3,o=e%64<56?64:128;this.buffer[s]=128;for(var a=s+1;a<o-8;a++)this.buffer[a]=0;this.buffer[o-8]=n>>>24&255,this.buffer[o-7]=n>>>16&255,this.buffer[o-6]=n>>>8&255,this.buffer[o-5]=n>>>0&255,this.buffer[o-4]=r>>>24&255,this.buffer[o-3]=r>>>16&255,this.buffer[o-2]=r>>>8&255,this.buffer[o-1]=r>>>0&255,i(this.temp,this.state,this.buffer,0,o),this.finished=!0}for(a=0;a<8;a++)t[4*a+0]=this.state[a]>>>24&255,t[4*a+1]=this.state[a]>>>16&255,t[4*a+2]=this.state[a]>>>8&255,t[4*a+3]=this.state[a]>>>0&255;return this},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype._saveState=function(t){for(var e=0;e<this.state.length;e++)t[e]=this.state[e]},e.prototype._restoreState=function(t,e){for(var i=0;i<this.state.length;i++)this.state[i]=t[i];this.bytesHashed=e,this.finished=!1,this.bufferLength=0},e}();t.Hash=s;var n=function(){function t(t){this.inner=new s,this.outer=new s,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var e=new Uint8Array(this.blockSize);if(t.length>this.blockSize)(new s).update(t).finish(e).clean();else for(var i=0;i<t.length;i++)e[i]=t[i];for(i=0;i<e.length;i++)e[i]^=54;this.inner.update(e);for(i=0;i<e.length;i++)e[i]^=106;this.outer.update(e),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(i=0;i<e.length;i++)e[i]=0}return t.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},t.prototype.clean=function(){for(var t=0;t<this.istate.length;t++)this.ostate[t]=this.istate[t]=0;this.inner.clean(),this.outer.clean()},t.prototype.update=function(t){return this.inner.update(t),this},t.prototype.finish=function(t){return this.outer.finished?this.outer.finish(t):(this.inner.finish(t),this.outer.update(t,this.digestLength).finish(t)),this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t}();function r(t){var e=(new s).update(t),i=e.digest();return e.clean(),i}function o(t,e){var i=new n(t).update(e),s=i.digest();return i.clean(),s}function a(t,e,i,s){var n=s[0];if(0===n)throw new Error("hkdf: cannot expand more");e.reset(),n>1&&e.update(t),i&&e.update(i),e.update(s),e.finish(t),s[0]++}t.HMAC=n,t.hash=r,t.default=r,t.hmac=o;var h=new Uint8Array(t.digestLength);t.hkdf=function(t,e,i,s){void 0===e&&(e=h),void 0===s&&(s=32);for(var r=new Uint8Array([1]),f=o(e,t),u=new n(f),d=new Uint8Array(u.digestLength),c=d.length,p=new Uint8Array(s),l=0;l<s;l++)c===d.length&&(a(d,u,i,r),c=0),p[l]=d[c++];return u.clean(),d.fill(0),r.fill(0),p},t.pbkdf2=function(t,e,i,s){for(var r=new n(t),o=r.digestLength,a=new Uint8Array(4),h=new Uint8Array(o),f=new Uint8Array(o),u=new Uint8Array(s),d=0;d*o<s;d++){var c=d+1;a[0]=c>>>24&255,a[1]=c>>>16&255,a[2]=c>>>8&255,a[3]=c>>>0&255,r.reset(),r.update(e),r.update(a),r.finish(f);for(var p=0;p<o;p++)h[p]=f[p];for(p=2;p<=i;p++){r.reset(),r.update(f).finish(f);for(var l=0;l<o;l++)h[l]^=f[l]}for(p=0;p<o&&d*o+p<s;p++)u[d*o+p]=h[p]}for(d=0;d<o;d++)h[d]=f[d]=0;for(d=0;d<4;d++)a[d]=0;return r.clean(),u}}(s);var n=s.default;for(var r in s)n[r]=s[r];t.exports=n}()})),r=function(){function t(t){this.server=t,this.data=[],this.audiencePlay_hash=function(t){this.generated_hash=n(t)},this.audiencePlay_add=function(t,e,i){var s={dataType:t,traitName:e,traitValue:i};this.data.push(s)},this.audiencePlay_end=function(){this.hashedMobile&&this.hashedEmail?this.requestBody={x_access_token:this.accessToken,adv_id:this.advertiserId,HashedEmail:this.hashedEmail,HashedMobile:this.hashedMobile,InformationGroup:this.informationGroup,data:this.data,eventDate:Math.floor((new Date).getTime()/1e3)}:this.hashedMobile?this.requestBody={x_access_token:this.accessToken,adv_id:this.advertiserId,HashedMobile:this.hashedMobile,InformationGroup:this.informationGroup,data:this.data,eventDate:Math.floor((new Date).getTime()/1e3)}:this.hashedEmail?this.requestBody={x_access_token:this.accessToken,adv_id:this.advertiserId,HashedEmail:this.hashedEmail,InformationGroup:this.informationGroup,data:this.data,eventDate:Math.floor((new Date).getTime()/1e3)}:this.requestBody={x_access_token:this.accessToken,adv_id:this.advertiserId,InformationGroup:this.informationGroup,data:this.data,eventDate:Math.floor((new Date).getTime()/1e3)}},this.audiencePlay_send=function(){return console.log("requestBody",this.requestBody),this.PosttestService.post(this.requestBody,this.publisherDomain).subscribe((function(t){console.log("status",t)}))}}return t.prototype.audiencePlay_set=function(t,e){this.accessToken=t,this.publisherDomain=e},t.prototype.audiencePlay_setAdvertiserId=function(t){this.advertiserId=t},t.prototype.audiencePlay_setHashedEmail=function(t){this.hashedEmail=t},t.prototype.audiencePlay_setHashedMobile=function(t){this.hashedMobile=t},t.prototype.audiencePlay_start=function(t){this.informationGroup=t},t.prototype.ngOnInit=function(){},t}();r.decorators=[{type:e.Component,args:[{selector:"lib-posttest",template:"\n    <p>\n      posttest works!\n    </p>\n  "}]}],r.ctorParameters=function(){return[{type:s}]};var o=function(){};o.decorators=[{type:e.NgModule,args:[{declarations:[r],imports:[],exports:[r]}]}],t.PosttestComponent=r,t.PosttestModule=o,t.PosttestService=s,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=posttest.umd.min.js.map