import { Component } from '@angular/core';
import { PosttestService } from './posttest.service';
import sha256 from "../../../../node_modules/fast-sha256/sha256";
export class PosttestComponent {
    constructor(server) {
        this.server = server;
        this.data = [];
        this.audiencePlay_hash = function (dataValue) {
            this.generated_hash = sha256(dataValue);
        };
        this.audiencePlay_add = function (dataType, traitName, traitValue) {
            var obj = { "dataType": dataType, "traitName": traitName, "traitValue": traitValue };
            this.data.push(obj);
        };
        this.audiencePlay_end = function () {
            if (this.hashedMobile && this.hashedEmail) {
                this.requestBody = {
                    "x_access_token": this.accessToken,
                    "adv_id": this.advertiserId,
                    "HashedEmail": this.hashedEmail,
                    "HashedMobile": this.hashedMobile,
                    "InformationGroup": this.informationGroup,
                    "data": this.data,
                    "eventDate": Math.floor(new Date().getTime() / 1000)
                };
            }
            else if (this.hashedMobile) {
                this.requestBody = {
                    "x_access_token": this.accessToken,
                    "adv_id": this.advertiserId,
                    "HashedMobile": this.hashedMobile,
                    "InformationGroup": this.informationGroup,
                    "data": this.data,
                    "eventDate": Math.floor(new Date().getTime() / 1000)
                };
            }
            else if (this.hashedEmail) {
                this.requestBody = {
                    "x_access_token": this.accessToken,
                    "adv_id": this.advertiserId,
                    "HashedEmail": this.hashedEmail,
                    "InformationGroup": this.informationGroup,
                    "data": this.data,
                    "eventDate": Math.floor(new Date().getTime() / 1000)
                };
            }
            else {
                this.requestBody = {
                    "x_access_token": this.accessToken,
                    "adv_id": this.advertiserId,
                    "InformationGroup": this.informationGroup,
                    "data": this.data,
                    "eventDate": Math.floor(new Date().getTime() / 1000)
                };
            }
        };
        this.audiencePlay_send = function () {
            console.log("requestBody", this.requestBody);
            return this.PosttestService.post(this.requestBody, this.publisherDomain).subscribe(data => {
                console.log("status", data);
            });
        };
    }
    audiencePlay_set(AccessToken, publisherDomain) {
        this.accessToken = AccessToken;
        this.publisherDomain = publisherDomain;
    }
    audiencePlay_setAdvertiserId(AdvertiserId) {
        this.advertiserId = AdvertiserId;
    }
    audiencePlay_setHashedEmail(hashedMailId) {
        this.hashedEmail = hashedMailId;
    }
    audiencePlay_setHashedMobile(hashedMobileNumber) {
        this.hashedMobile = hashedMobileNumber;
    }
    audiencePlay_start(InformationGroup) {
        this.informationGroup = InformationGroup;
    }
    ngOnInit() {
    }
}
PosttestComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-posttest',
                template: `
    <p>
      posttest works!
    </p>
  `
            },] }
];
PosttestComponent.ctorParameters = () => [
    { type: PosttestService }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9zdHRlc3QuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvcG9zdHRlc3Qvc3JjL2xpYi9wb3N0dGVzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUNsRCxPQUFPLEVBQUMsZUFBZSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDcEQsT0FBTyxNQUFNLE1BQU0sNkNBQTZDLENBQUE7QUFhaEUsTUFBTSxPQUFPLGlCQUFpQjtJQUU1QixZQUFvQixNQUFzQjtRQUF0QixXQUFNLEdBQU4sTUFBTSxDQUFnQjtRQUc1QyxTQUFJLEdBQUMsRUFBRSxDQUFDO1FBa0NSLHNCQUFpQixHQUFDLFVBQVMsU0FBUztZQUVoQyxJQUFJLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUMzQyxDQUFDLENBQUE7UUFDRCxxQkFBZ0IsR0FBQyxVQUFTLFFBQVEsRUFBQyxTQUFTLEVBQUMsVUFBVTtZQUVuRCxJQUFJLEdBQUcsR0FBQyxFQUFDLFVBQVUsRUFBQyxRQUFRLEVBQUMsV0FBVyxFQUFDLFNBQVMsRUFBQyxZQUFZLEVBQUMsVUFBVSxFQUFDLENBQUE7WUFDM0UsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDeEIsQ0FBQyxDQUFBO1FBQ0QscUJBQWdCLEdBQUM7WUFFYixJQUFHLElBQUksQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFdBQVcsRUFDdkM7Z0JBQ0csSUFBSSxDQUFDLFdBQVcsR0FBQztvQkFDakIsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLFdBQVc7b0JBQ2xDLFFBQVEsRUFBQyxJQUFJLENBQUMsWUFBWTtvQkFDMUIsYUFBYSxFQUFDLElBQUksQ0FBQyxXQUFXO29CQUM5QixjQUFjLEVBQUMsSUFBSSxDQUFDLFlBQVk7b0JBQ2hDLGtCQUFrQixFQUFDLElBQUksQ0FBQyxnQkFBZ0I7b0JBQ3hDLE1BQU0sRUFBQyxJQUFJLENBQUMsSUFBSTtvQkFDaEIsV0FBVyxFQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUM7aUJBQ2xELENBQUE7YUFDSjtpQkFDSSxJQUFHLElBQUksQ0FBQyxZQUFZLEVBQ3pCO2dCQUVJLElBQUksQ0FBQyxXQUFXLEdBQUM7b0JBQ2IsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLFdBQVc7b0JBQ2xDLFFBQVEsRUFBQyxJQUFJLENBQUMsWUFBWTtvQkFDMUIsY0FBYyxFQUFDLElBQUksQ0FBQyxZQUFZO29CQUNoQyxrQkFBa0IsRUFBQyxJQUFJLENBQUMsZ0JBQWdCO29CQUN4QyxNQUFNLEVBQUMsSUFBSSxDQUFDLElBQUk7b0JBQ2hCLFdBQVcsRUFBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDO2lCQUN0RCxDQUFBO2FBQ0o7aUJBR0ksSUFBRyxJQUFJLENBQUMsV0FBVyxFQUN4QjtnQkFDSSxJQUFJLENBQUMsV0FBVyxHQUFDO29CQUNiLGdCQUFnQixFQUFFLElBQUksQ0FBQyxXQUFXO29CQUNqQyxRQUFRLEVBQUMsSUFBSSxDQUFDLFlBQVk7b0JBQzFCLGFBQWEsRUFBQyxJQUFJLENBQUMsV0FBVztvQkFDL0Isa0JBQWtCLEVBQUMsSUFBSSxDQUFDLGdCQUFnQjtvQkFDeEMsTUFBTSxFQUFDLElBQUksQ0FBQyxJQUFJO29CQUNoQixXQUFXLEVBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQztpQkFDckQsQ0FBQTthQUNMO2lCQUVEO2dCQUNJLElBQUksQ0FBQyxXQUFXLEdBQUM7b0JBQ2IsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLFdBQVc7b0JBQ2pDLFFBQVEsRUFBQyxJQUFJLENBQUMsWUFBWTtvQkFDM0Isa0JBQWtCLEVBQUMsSUFBSSxDQUFDLGdCQUFnQjtvQkFDeEMsTUFBTSxFQUFDLElBQUksQ0FBQyxJQUFJO29CQUNoQixXQUFXLEVBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQztpQkFDckQsQ0FBQTthQUNMO1FBR0wsQ0FBQyxDQUFBO1FBRUQsc0JBQWlCLEdBQUM7WUFFZCxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUE7WUFDM0MsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFBLEVBQUU7Z0JBRXBGLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFDLElBQUksQ0FBQyxDQUFBO1lBQzVCLENBQUMsQ0FBQyxDQUFBO1FBR1IsQ0FBQyxDQUFBO0lBNUcrQyxDQUFDO0lBWWhELGdCQUFnQixDQUFDLFdBQVcsRUFBQyxlQUFlO1FBRTNDLElBQUksQ0FBQyxXQUFXLEdBQUMsV0FBVyxDQUFDO1FBQzdCLElBQUksQ0FBQyxlQUFlLEdBQUMsZUFBZSxDQUFBO0lBQ3JDLENBQUM7SUFDRCw0QkFBNEIsQ0FBQyxZQUFZO1FBRXpDLElBQUksQ0FBQyxZQUFZLEdBQUMsWUFBWSxDQUFDO0lBQ2hDLENBQUM7SUFFRCwyQkFBMkIsQ0FBQyxZQUFZO1FBRXJDLElBQUksQ0FBQyxXQUFXLEdBQUcsWUFBWSxDQUFDO0lBQ25DLENBQUM7SUFDRCw0QkFBNEIsQ0FBQyxrQkFBa0I7UUFFM0MsSUFBSSxDQUFDLFlBQVksR0FBRyxrQkFBa0IsQ0FBQztJQUUzQyxDQUFDO0lBR0Qsa0JBQWtCLENBQUMsZ0JBQWdCO1FBRS9CLElBQUksQ0FBQyxnQkFBZ0IsR0FBQyxnQkFBZ0IsQ0FBQztJQUMzQyxDQUFDO0lBNEVDLFFBQVE7SUFDUixDQUFDOzs7WUE3SEYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxjQUFjO2dCQUN4QixRQUFRLEVBQUU7Ozs7R0FJVDthQUdGOzs7WUFiTyxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7UG9zdHRlc3RTZXJ2aWNlIH0gZnJvbSAnLi9wb3N0dGVzdC5zZXJ2aWNlJztcbmltcG9ydCBzaGEyNTYgZnJvbSBcIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9mYXN0LXNoYTI1Ni9zaGEyNTZcIlxuXG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xpYi1wb3N0dGVzdCcsXG4gIHRlbXBsYXRlOiBgXG4gICAgPHA+XG4gICAgICBwb3N0dGVzdCB3b3JrcyFcbiAgICA8L3A+XG4gIGAsXG4gIHN0eWxlczogW1xuICBdXG59KVxuZXhwb3J0IGNsYXNzIFBvc3R0ZXN0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNlcnZlcjpQb3N0dGVzdFNlcnZpY2UpIHsgfVxuXG5cbmRhdGE9W107XG5hY2Nlc3NUb2tlbjphbnk7XG4gaW5mb3JtYXRpb25Hcm91cDpzdHJpbmc7XG4gcmVxdWVzdEJvZHk6e307XG4gdXJsOmFueTtcbiBhZHZlcnRpc2VySWQ6YW55O1xuIGhhc2hlZEVtYWlsOmFueTtcbiBoYXNoZWRNb2JpbGU6YW55O1xuIHB1Ymxpc2hlckRvbWFpbjphbnk7XG4gYXVkaWVuY2VQbGF5X3NldChBY2Nlc3NUb2tlbixwdWJsaXNoZXJEb21haW4pXG4ge1xuICB0aGlzLmFjY2Vzc1Rva2VuPUFjY2Vzc1Rva2VuO1xuICB0aGlzLnB1Ymxpc2hlckRvbWFpbj1wdWJsaXNoZXJEb21haW5cbiB9XG4gYXVkaWVuY2VQbGF5X3NldEFkdmVydGlzZXJJZChBZHZlcnRpc2VySWQpXG57XG4gdGhpcy5hZHZlcnRpc2VySWQ9QWR2ZXJ0aXNlcklkO1xufVxuXG5hdWRpZW5jZVBsYXlfc2V0SGFzaGVkRW1haWwoaGFzaGVkTWFpbElkKVxue1xuICAgdGhpcy5oYXNoZWRFbWFpbCA9IGhhc2hlZE1haWxJZDtcbn1cbmF1ZGllbmNlUGxheV9zZXRIYXNoZWRNb2JpbGUoaGFzaGVkTW9iaWxlTnVtYmVyKVxue1xuICAgIHRoaXMuaGFzaGVkTW9iaWxlID0gaGFzaGVkTW9iaWxlTnVtYmVyO1xuXG59XG5cblxuYXVkaWVuY2VQbGF5X3N0YXJ0KEluZm9ybWF0aW9uR3JvdXApXG57XG4gICAgdGhpcy5pbmZvcm1hdGlvbkdyb3VwPUluZm9ybWF0aW9uR3JvdXA7XG59XG5hdWRpZW5jZVBsYXlfaGFzaD1mdW5jdGlvbihkYXRhVmFsdWUpXG57XG4gICAgdGhpcy5nZW5lcmF0ZWRfaGFzaCA9IHNoYTI1NihkYXRhVmFsdWUpXG59XG5hdWRpZW5jZVBsYXlfYWRkPWZ1bmN0aW9uKGRhdGFUeXBlLHRyYWl0TmFtZSx0cmFpdFZhbHVlKVxue1xuICAgIHZhciBvYmo9e1wiZGF0YVR5cGVcIjpkYXRhVHlwZSxcInRyYWl0TmFtZVwiOnRyYWl0TmFtZSxcInRyYWl0VmFsdWVcIjp0cmFpdFZhbHVlfVxuICAgIHRoaXMuZGF0YS5wdXNoKG9iaik7XG59XG5hdWRpZW5jZVBsYXlfZW5kPWZ1bmN0aW9uKClcbntcbiAgICBpZih0aGlzLmhhc2hlZE1vYmlsZSAmJiB0aGlzLmhhc2hlZEVtYWlsKVxuICAgICB7ICBcbiAgICAgICAgdGhpcy5yZXF1ZXN0Qm9keT17XG4gICAgICAgIFwieF9hY2Nlc3NfdG9rZW5cIiA6dGhpcy5hY2Nlc3NUb2tlbiwgXG4gICAgICAgIFwiYWR2X2lkXCI6dGhpcy5hZHZlcnRpc2VySWQsXG4gICAgICAgIFwiSGFzaGVkRW1haWxcIjp0aGlzLmhhc2hlZEVtYWlsLFxuICAgICAgICBcIkhhc2hlZE1vYmlsZVwiOnRoaXMuaGFzaGVkTW9iaWxlLFxuICAgICAgICBcIkluZm9ybWF0aW9uR3JvdXBcIjp0aGlzLmluZm9ybWF0aW9uR3JvdXAsIFxuICAgICAgICBcImRhdGFcIjp0aGlzLmRhdGEsXG4gICAgICAgIFwiZXZlbnREYXRlXCI6TWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApXG4gICAgICAgIH0gICBcbiAgICB9XG4gICAgZWxzZSBpZih0aGlzLmhhc2hlZE1vYmlsZSlcbiAgICB7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnJlcXVlc3RCb2R5PXtcbiAgICAgICAgICAgIFwieF9hY2Nlc3NfdG9rZW5cIiA6dGhpcy5hY2Nlc3NUb2tlbiwgXG4gICAgICAgICAgICBcImFkdl9pZFwiOnRoaXMuYWR2ZXJ0aXNlcklkLFxuICAgICAgICAgICAgXCJIYXNoZWRNb2JpbGVcIjp0aGlzLmhhc2hlZE1vYmlsZSxcbiAgICAgICAgICAgIFwiSW5mb3JtYXRpb25Hcm91cFwiOnRoaXMuaW5mb3JtYXRpb25Hcm91cCwgXG4gICAgICAgICAgICBcImRhdGFcIjp0aGlzLmRhdGEsXG4gICAgICAgICAgICBcImV2ZW50RGF0ZVwiOk1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgICAgIFxuICAgIGVsc2UgaWYodGhpcy5oYXNoZWRFbWFpbClcbiAgICB7XG4gICAgICAgIHRoaXMucmVxdWVzdEJvZHk9e1xuICAgICAgICAgICAgXCJ4X2FjY2Vzc190b2tlblwiIDp0aGlzLmFjY2Vzc1Rva2VuLCBcbiAgICAgICAgICAgICBcImFkdl9pZFwiOnRoaXMuYWR2ZXJ0aXNlcklkLFxuICAgICAgICAgICAgIFwiSGFzaGVkRW1haWxcIjp0aGlzLmhhc2hlZEVtYWlsLFxuICAgICAgICAgICAgXCJJbmZvcm1hdGlvbkdyb3VwXCI6dGhpcy5pbmZvcm1hdGlvbkdyb3VwLCBcbiAgICAgICAgICAgIFwiZGF0YVwiOnRoaXMuZGF0YSxcbiAgICAgICAgICAgIFwiZXZlbnREYXRlXCI6TWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApXG4gICAgICAgICB9XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICAgIHRoaXMucmVxdWVzdEJvZHk9e1xuICAgICAgICAgICAgXCJ4X2FjY2Vzc190b2tlblwiIDp0aGlzLmFjY2Vzc1Rva2VuLCBcbiAgICAgICAgICAgICBcImFkdl9pZFwiOnRoaXMuYWR2ZXJ0aXNlcklkLFxuICAgICAgICAgICAgXCJJbmZvcm1hdGlvbkdyb3VwXCI6dGhpcy5pbmZvcm1hdGlvbkdyb3VwLCBcbiAgICAgICAgICAgIFwiZGF0YVwiOnRoaXMuZGF0YSxcbiAgICAgICAgICAgIFwiZXZlbnREYXRlXCI6TWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApXG4gICAgICAgICB9XG4gICAgfVxuICAgXG4gICBcbn1cblxuYXVkaWVuY2VQbGF5X3NlbmQ9ZnVuY3Rpb24oKVxue1xuICAgIGNvbnNvbGUubG9nKFwicmVxdWVzdEJvZHlcIix0aGlzLnJlcXVlc3RCb2R5KVxuICAgIHJldHVybiB0aGlzLlBvc3R0ZXN0U2VydmljZS5wb3N0KHRoaXMucmVxdWVzdEJvZHksdGhpcy5wdWJsaXNoZXJEb21haW4pLnN1YnNjcmliZShkYXRhPT5cbiAgICAgIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJzdGF0dXNcIixkYXRhKVxuICAgICAgfSlcbiAgIFxuICAgIFxufVxuXG5cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgfVxuXG59XG4iXX0=